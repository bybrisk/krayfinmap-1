(this.webpackJsonpbybrisk=this.webpackJsonpbybrisk||[]).push([[10],{494:function(e,t,a){"use strict";a.r(t);var n=a(162),l=a(0),r=a.n(l),c=a(442),i=a(477),s=a(429),o=a.n(s),d=a(430),u=a.n(d),m=a(431),b=a.n(m),g=a(466),f=a(467),p=a(468),E=a(469),v=a(128),y=a(200),h=a(516),O=a(474),j=a(505),C=a(129),S=a(22),k=a(50),x=a(51),D=a(75),I=a.n(D),w=a(76),N=a(166),P=a(135);const A=r.a.lazy(()=>a.e(3).then(a.bind(null,246))),B=Object(v.a)(e=>({listItem:{paddingTop:0,paddingBottom:0},avatar:{height:20,width:20,borderRadius:"50%"},iconContainer:{minWidth:30},cardContainer:{position:"absolute",top:150,right:45,maxWidth:200,maxHeight:200,zIndex:60,overflow:"scroll",background:"#fff",textAlign:"left",borderRadius:10,transition:"all 0.4s",boxShadow:"0px 0px 120px -25px rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"flex-start",justifyContent:"center",minWidth:100}})),M=({color:e,onClick:t})=>r.a.createElement("div",null,r.a.createElement(o.a,{onClick:t,style:{color:e,height:20,width:20}})),T=({onClick:e})=>r.a.createElement("div",null,r.a.createElement(u.a,{onClick:e,style:{color:"darkgoldenrod",height:20,width:20}})),W=()=>r.a.createElement("div",null,r.a.createElement(b.a,{style:{color:"blue",height:20,width:20}}));new I.a({publishKey:"pub-c-b62c8c92-592d-4472-bee9-03e3ccf8645b",subscribeKey:"sub-c-ad9893f0-6907-11eb-b914-eedc703588a5"});t.default=r.a.memo(()=>{var e;const t=Object(x.b)().enqueueSnackbar,a=r.a.useState(!1),s=Object(n.a)(a,2),o=s[0],d=s[1],u=Object(S.c)(e=>e.user);console.log(u);const m=B(),b=Object(l.useState)(null),v=Object(n.a)(b,2),D=v[0],I=v[1],L=Object(l.useState)(!1),R=Object(n.a)(L,2),q=R[0],F=R[1],z=Object(l.useState)(null),_=Object(n.a)(z,2),K=_[0],H=_[1],J=Object(l.useState)(new Map),U=Object(n.a)(J,2),G=U[0],Q=U[1],V=Object(l.useState)(["6038bd0fc35e3b8e8bd9f81a"]),Z=Object(n.a)(V,1)[0],X=Object(w.b)(),Y=Object(l.useState)({lat:23.202357,lng:77.414254}),$=Object(n.a)(Y,2),ee=$[0],te=($[1],Object(S.c)(e=>e.bybId)),ae=Object(l.useState)(11),ne=Object(n.a)(ae,2),le=ne[0],re=ne[1],ce=r.a.useState(""),ie=Object(n.a)(ce,2),se=ie[0],oe=ie[1],de=e=>{oe(e),d(!0)},ue=()=>{d(!1)};Object(l.useEffect)(()=>(F(!0),Object(k.m)({bybId:te,setClusters:I,enqueueSnackbar:t,setLoading:F,setDelivery:H}),()=>{}),[te]),console.log(D);return Object(l.useEffect)(()=>{X.addListener({status:function(e){},message:function({channel:e,message:t,publisher:a}){t&&(e=>{Q(new Map(G.set(e.agent,e)))})(t)},presence:function(e){}}),X.subscribe({channels:["6038bd0fc35e3b8e8bd9f81a"]})},[X,Z]),r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,null,r.a.createElement("title",null,"Cluster Summary"),r.a.createElement("meta",{name:"description",content:"Visual Representation of Deliveries of your account Made Simple"})),q?r.a.createElement(y.a,null):r.a.createElement("div",{style:{height:"90vh",width:"100%"}},r.a.createElement("div",{className:m.cardContainer,id:"bright"},q?r.a.createElement(i.a,{style:{height:"30px",width:"30px",color:"#4caf50"}}):r.a.createElement(g.a,{"aria-label":"Cluster display"},0===(null===D||void 0===D?void 0:D.length)&&r.a.createElement(f.a,{className:m.listItem,style:{marginTop:23,color:"#057g78"}},"No Clusters Present"),null===D||void 0===D?void 0:D.map((e,t)=>r.a.createElement(f.a,{button:!0,key:e[0].deliveryAgentName,component:P.b,to:{pathname:"/dashboard/clusterDeliveries",state:{clusterID:e[0].clusterid}},className:m.listItem},r.a.createElement(p.a,{className:m.iconContainer},r.a.createElement(C.a,{className:m.avatar,style:{background:e[0].color},variant:"elevation"})),r.a.createElement(E.a,{primary:e[0].deliveryAgentName}))))),r.a.createElement(c.a,{bootstrapURLKeys:{key:"AIzaSyDSl1BOkFlpEiOs3PIavj24cMDo0tDBOIQ"},defaultCenter:ee,defaultZoom:le,yesIWantToUseGoogleMapApiInternals:!0,onChange:({zoom:e,bounds:t})=>{re(e)}},null===D||void 0===D?void 0:D.map(e=>e.map(e=>r.a.createElement(M,{lat:e.geometry.latitude,lng:e.geometry.longitude,color:e.color,onClick:()=>de(e.deliveryid),text:"My Marker"}))),null===D&&(null===K||void 0===K||null===(e=K.filter(e=>"Pending"===e._source.deliveryStatus))||void 0===e?void 0:e.map(e=>r.a.createElement(T,{lat:e._source.latitude,lng:e._source.longitude,onClick:()=>de(e._id),color:"darkgoldenrod",text:"My Marker"}))),[...G.values()].map(e=>r.a.createElement(W,{lat:e.Lat,lng:e.Log,color:"#000",text:"My Marker"})))),r.a.createElement(j.a,{open:o,onClose:ue,"aria-labelledby":"Deliveries","aria-describedby":"Deliveries",closeAfterTransition:!0,BackdropComponent:h.a,BackdropProps:{timeout:400},style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",background:"#ffffff"}},r.a.createElement(O.a,{in:o,timeout:250},r.a.createElement("section",{style:{background:"#ffffff",width:"100%",height:"100%"}},r.a.createElement("div",{style:{fontSize:40,textAlign:"right",padding:"0 30px",margin:0}},"    ",r.a.createElement("span",{style:{cursor:"pointer"},onClick:ue},"x")),r.a.createElement(A,{id:se,handleClose:ue})))))})},495:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(162),l=a(286),r=a(0),c=a.n(r),i=a(24),s=a(53),o=a(166),d=a(50),u=a(290),m=a.n(u);const b=e=>{const t=e.array,a=e.filter;return t.filter(e=>e._source.deliveryStatus===a).length};function g(e){console.log(e.location,e.location.state,"--------------------------------");const t=Object(i.g)(),a=null!==e.location.state&&e.location.state.clusterID;console.log(a),Object(r.useEffect)(()=>{Object(d.l)({clusterID:a,setDelivery:p})},[a]);const u=c.a.useState([]),g=Object(n.a)(u,2),f=g[0],p=g[1];b({array:f,filter:"confirmed"}),b({array:f,filter:"cancelled"}),b({array:f,filter:"pending"}),b({array:f,filter:"transit"});return console.log(f),c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,null,c.a.createElement("title",null,"Deliveries"),c.a.createElement("meta",{name:"description",content:"List of Deliveries of your account"})),c.a.createElement(r.Suspense,{fallback:c.a.createElement(s.a,null)},c.a.createElement(m.a,{onClick:()=>t.goBack()}),c.a.createElement(l.a,{rows:f,setDelivery:p})))}},509:function(e,t,a){"use strict";a.r(t);var n=a(162),l=a(192),r=a.n(l),c=a(166),i=a(51),s=a(129),o=a(128),d=a(491),u=a(492),m=a(487),b=a(490),g=a(508),f=a(488),p=a(0),E=a.n(p),v=a(22),y=a(50),h=a(180),O=a(489),j=a(517);var C=function(e){const t=e.classes,a=e.order,n=e.orderBy,l=e.onRequestSort,r=e.headCells;return E.a.createElement(O.a,null,E.a.createElement(f.a,null,r.map(e=>{return E.a.createElement(h.a,{key:e.id,align:"center",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},E.a.createElement(j.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(r=e.id,e=>{l(e,r)})},e.label,n===e.id?E.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var r})))},S=a(481),k=a(477),x=a(131),D=a(168);const I=Object(o.a)(e=>({title:{fontWeight:550,fontSize:"2rem"},toolbarContainer:{padding:e.spacing(3,1)}}));function w(e){console.log(e);e.setClusters;const t=e.totaldeliveries,a=Object(p.useState)(!1),l=Object(n.a)(a,2),r=l[0],c=l[1],s=E.a.useState([]),o=Object(n.a)(s,2),d=(o[0],o[1]),u=Object(v.c)(e=>e.bybId),m=Object(i.b)().enqueueSnackbar;Object(p.useEffect)(()=>(Object(y.k)({bybId:u,setAgents:d}),()=>{}),[u]);const b=Object(p.useState)(null),g=Object(n.a)(b,2),f=(g[0],g[1]),h=I();return E.a.createElement(S.a,{container:!0,justify:"center",direction:"column",alignItems:"center",className:h.toolbarContainer},E.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start"},E.a.createElement(x.a,{variant:"h5",component:"h6",gutterBottom:!0,className:h.title},"Cluster")),E.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start",style:{marginBottom:20}},E.a.createElement(S.a,{container:!0,xs:12,alignItems:"flex-start"},E.a.createElement(D.a,{variant:"contained",disableFocusRipple:!0,disableElevation:!0,type:"submit",onClick:()=>{c(!0);const e=JSON.stringify({BybID:u,NumberOfCluster:0});Object(y.v)({clusterData:e,enqueueSnackbar:m,setSubmitting:c,bybId:u,setCluster:f})},style:{marginTop:6,maxWidth:180}},r?E.a.createElement(k.a,{style:{height:"20px",width:"20px",color:"#fff"}}):"Create Clusters"))),E.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start",style:{marginBottom:20}},E.a.createElement(S.a,{item:!0,xs:12,md:3,lg:3,container:!0,alignItems:"center"},E.a.createElement(x.a,{variant:"h6"},"Total Deliveries :")),E.a.createElement(S.a,{container:!0,xs:12,md:8,alignItems:"center"},E.a.createElement(x.a,{variant:"h4",component:"h5"},t))))}var N=a(200);const P=Object(o.a)(e=>({root:{width:"100%",padding:e.spacing(3)},paper:{width:"100%",marginBottom:e.spacing(2),paddingTop:20},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},avatar:{color:"#ffffff",backgroundColor:r.a[700]}}));t.default=E.a.memo((function(e){const t=P(),a=E.a.useState("asc"),l=Object(n.a)(a,2),r=l[0],o=l[1],O=E.a.useState("clusterTime"),j=Object(n.a)(O,2),S=j[0],k=j[1],x=E.a.useState(0),D=Object(n.a)(x,2),I=D[0],A=D[1],B=E.a.useState(""),M=Object(n.a)(B,2),T=(M[0],M[1],Object(i.b)().enqueueSnackbar,Object(p.useState)(!1)),W=Object(n.a)(T,2),L=W[0],R=W[1],q=E.a.useState(10),F=Object(n.a)(q,2),z=F[0],_=F[1],K=E.a.useState(!1),H=Object(n.a)(K,2),J=(H[0],H[1],E.a.useState([])),U=Object(n.a)(J,2),G=U[0],Q=U[1],V=Object(v.c)(e=>e.bybId);Object(p.useEffect)(()=>(Object(y.p)({bybId:V,setClusters:Q,setLoading:R}),()=>{}),[V]);const Z=z-Math.min(z,G.length-I*z);return E.a.createElement(E.a.Fragment,null,E.a.createElement(c.a,null,E.a.createElement("title",null,"Agents"),E.a.createElement("meta",{name:"description",content:"List of Agents Delivering your deliveries"})),L?E.a.createElement(N.a,null):E.a.createElement("div",{className:t.root},E.a.createElement(s.a,{className:t.paper},E.a.createElement(w,{totaldeliveries:(()=>{let e=0;for(let n=0;n<G.length;n++){var t,a;console.log(null===(t=G[n])||void 0===t?void 0:t.totalDeliveries,e,"====---===---===---=="),e+=null===(a=G[n])||void 0===a?void 0:a.totalDeliveries}return e})(),setClusters:Q}),E.a.createElement(b.a,null,E.a.createElement(d.a,{className:t.table,"aria-labelledby":"Agents","aria-label":"Agent Data"},E.a.createElement(C,{classes:t,order:r,orderBy:S,onRequestSort:(e,t)=>{o(S===t&&"asc"===r?"desc":"asc"),k(t)},rowCount:G.length,headCells:[{id:"Agent_Name",numeric:!0,disablePadding:!1,label:"Agent Name"},{id:"deliveryAgentID",numeric:!0,disablePadding:!1,label:"Agent ID"},{id:"totalDeliveries",numeric:!1,disablePadding:!1,label:"Deliveries in Cluster"},{id:"clusterDistance",numeric:!1,disablePadding:!1,label:"Cluster Distance"},{id:"clusterTime",numeric:!1,disablePadding:!1,label:"Cluster Time"},{id:"distanceObserved",numeric:!0,disablePadding:!1,label:"Distance Observed"},{id:"averageWeight",numeric:!0,disablePadding:!1,label:"Total Weight"}]}),E.a.createElement(u.a,null,G&&Object(h.e)(G,Object(h.c)(r,S)).slice(I*z,I*z+z).map(e=>E.a.createElement(E.a.Fragment,null,E.a.createElement(h.b,{tabIndex:-1,key:e.name},E.a.createElement(h.a,{align:"center"},e.deliveryAgentName),E.a.createElement(h.a,{align:"center"},e.deliveryAgentID),E.a.createElement(h.a,{align:"center"},e.totalDeliveries),E.a.createElement(h.a,{align:"center"},e.clusterDistance),E.a.createElement(h.a,{align:"center"},e.clusterTime),E.a.createElement(h.a,{align:"center"},(e.distanceObserved/1e3).toFixed(2)," KM"),E.a.createElement(h.a,{align:"center"},e.averageWeight)))),Z>0&&E.a.createElement(f.a,null,E.a.createElement(m.a,{colSpan:6}))))),E.a.createElement(g.a,{rowsPerPageOptions:[5,10,25],component:"div",count:G.length,rowsPerPage:z,page:I,onChangePage:(e,t)=>{A(t)},onChangeRowsPerPage:e=>{_(parseInt(e.target.value,10)),A(0)}}))))}))}}]);
//# sourceMappingURL=views-error.318a4485.chunk.js.map