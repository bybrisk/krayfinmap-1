(this.webpackJsonpbybrisk=this.webpackJsonpbybrisk||[]).push([[10],{485:function(e,t,a){"use strict";a.r(t);var n=a(155),l=a(0),r=a.n(l),c=a(433),i=a(468),s=a(421),o=a.n(s),d=a(422),m=a.n(d),u=a(457),b=a(458),g=a(459),E=a(460),f=a(122),v=a(193),p=a(123),y=a(23),h=a(49),O=a(50),j=a(73),S=a.n(j),C=a(74),x=a(159),D=a(41);const I=Object(f.a)(e=>({listItem:{paddingTop:0,paddingBottom:0},avatar:{height:20,width:20,borderRadius:"50%"},iconContainer:{minWidth:30},cardContainer:{position:"absolute",top:150,right:45,maxWidth:200,maxHeight:200,zIndex:60,overflow:"scroll",background:"#fff",textAlign:"left",borderRadius:10,transition:"all 0.4s",boxShadow:"0px 0px 120px -25px rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"flex-start",justifyContent:"center",minWidth:100}})),k=({color:e})=>r.a.createElement("div",null,r.a.createElement(o.a,{style:{color:e,height:20,width:20}})),w=({color:e})=>r.a.createElement("div",null,r.a.createElement(m.a,{style:{color:"darkgoldenrod",height:20,width:20}}));new S.a({publishKey:"pub-c-b62c8c92-592d-4472-bee9-03e3ccf8645b",subscribeKey:"sub-c-ad9893f0-6907-11eb-b914-eedc703588a5"});t.default=()=>{var e;const t=Object(O.b)().enqueueSnackbar,a=I(),s=Object(l.useState)(null),o=Object(n.a)(s,2),d=o[0],m=o[1],f=Object(l.useState)(!1),j=Object(n.a)(f,2),S=j[0],N=j[1],P=Object(l.useState)(null),A=Object(n.a)(P,2),B=A[0],T=A[1],W=Object(l.useState)(["6038bd0fc35e3b8e8bd9f81a"]),M=Object(n.a)(W,1)[0],R=Object(C.b)(),q=Object(l.useState)({lat:23.202357,lng:77.414254}),F=Object(n.a)(q,2),L=F[0],_=(F[1],Object(y.c)(e=>e.bybId)),z=Object(l.useState)(11),K=Object(n.a)(z,2),H=K[0],J=K[1],U=e=>{const t=e.message;console.log(t)};return Object(l.useEffect)(()=>(N(!0),Object(h.m)({bybId:_,setClusters:m,enqueueSnackbar:t,setLoading:N,setDelivery:T}),()=>{}),[_]),console.log(B),Object(l.useEffect)(()=>{R.addListener({message:U}),R.subscribe({channels:M})},[R,M]),r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,null,r.a.createElement("title",null,"Cluster Summary"),r.a.createElement("meta",{name:"description",content:"Visual Representation of Deliveries of your account Made Simple"})),S?r.a.createElement(v.a,null):r.a.createElement("div",{style:{height:"90vh",width:"100%"}},r.a.createElement("div",{className:a.cardContainer,id:"bright"},S?r.a.createElement(i.a,{style:{height:"30px",width:"30px",color:"#4caf50"}}):r.a.createElement(u.a,{"aria-label":"Cluster display"},0===(null===d||void 0===d?void 0:d.length)&&r.a.createElement(b.a,{className:a.listItem,style:{marginTop:23,color:"#057g78"}},"No Clusters Present"),null===d||void 0===d?void 0:d.map((e,t)=>r.a.createElement(b.a,{button:!0,key:e[0].deliveryAgentName,component:D.b,to:{pathname:"/dashboard/clusterDeliveries",state:{clusterID:e[0].clusterid}},className:a.listItem},r.a.createElement(g.a,{className:a.iconContainer},r.a.createElement(p.a,{className:a.avatar,style:{background:e[0].color},variant:"elevation"})),r.a.createElement(E.a,{primary:e[0].deliveryAgentName}))))),r.a.createElement(c.a,{bootstrapURLKeys:{key:"AIzaSyDSl1BOkFlpEiOs3PIavj24cMDo0tDBOIQ"},defaultCenter:L,defaultZoom:H,yesIWantToUseGoogleMapApiInternals:!0,onChange:({zoom:e,bounds:t})=>{J(e)}},null===d||void 0===d?void 0:d.map(e=>e.map(e=>r.a.createElement(k,{lat:e.geometry.latitude,lng:e.geometry.longitude,color:e.color,text:"My Marker"}))),null===d&&(null===B||void 0===B||null===(e=B.filter(e=>"Pending"===e._source.deliveryStatus))||void 0===e?void 0:e.map(e=>r.a.createElement(w,{lat:e._source.latitude,lng:e._source.longitude,color:"darkgoldenrod",text:"My Marker"}))))))}},486:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(155),l=a(278),r=a(0),c=a.n(r),i=a(4),s=a(52),o=a(159),d=a(49),m=a(239),u=a.n(m);const b=e=>{const t=e.array,a=e.filter;return t.filter(e=>e._source.deliveryStatus===a).length};function g(e){console.log(e.location,e.location.state,"--------------------------------");const t=Object(i.g)(),a=null!==e.location.state&&e.location.state.clusterID;console.log(a),Object(r.useEffect)(()=>{Object(d.l)({clusterID:a,setDelivery:f})},[a]);const m=c.a.useState([]),g=Object(n.a)(m,2),E=g[0],f=g[1];b({array:E,filter:"confirmed"}),b({array:E,filter:"cancelled"}),b({array:E,filter:"pending"}),b({array:E,filter:"transit"});return c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,null,c.a.createElement("title",null,"Deliveries"),c.a.createElement("meta",{name:"description",content:"List of Deliveries of your account"})),c.a.createElement(r.Suspense,{fallback:c.a.createElement(s.a,null)},c.a.createElement(u.a,{onClick:()=>t.goBack()}),c.a.createElement(l.a,{rows:E,setDelivery:f})))}},500:function(e,t,a){"use strict";a.r(t);var n=a(155),l=a(185),r=a.n(l),c=a(159),i=a(50),s=a(123),o=a(122),d=a(482),m=a(483),u=a(478),b=a(481),g=a(499),E=a(479),f=a(0),v=a.n(f),p=a(23),y=a(49),h=a(173),O=a(480),j=a(508);var S=function(e){const t=e.classes,a=e.order,n=e.orderBy,l=e.onRequestSort,r=e.headCells;return v.a.createElement(O.a,null,v.a.createElement(E.a,null,r.map(e=>{return v.a.createElement(h.a,{key:e.id,align:"center",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},v.a.createElement(j.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(r=e.id,e=>{l(e,r)})},e.label,n===e.id?v.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var r})))},C=a(472),x=a(468),D=a(125),I=a(161);const k=Object(o.a)(e=>({title:{fontWeight:550,fontSize:"2rem"},toolbarContainer:{padding:e.spacing(3,1)}}));function w(e){console.log(e);e.setClusters;const t=e.totaldeliveries,a=Object(f.useState)(!1),l=Object(n.a)(a,2),r=l[0],c=l[1],s=v.a.useState([]),o=Object(n.a)(s,2),d=(o[0],o[1]),m=Object(p.c)(e=>e.bybId),u=Object(i.b)().enqueueSnackbar;Object(f.useEffect)(()=>(Object(y.k)({bybId:m,setAgents:d}),()=>{}),[m]);const b=Object(f.useState)(null),g=Object(n.a)(b,2),E=(g[0],g[1]),h=k();return v.a.createElement(C.a,{container:!0,justify:"center",direction:"column",alignItems:"center",className:h.toolbarContainer},v.a.createElement(C.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start"},v.a.createElement(D.a,{variant:"h5",component:"h6",gutterBottom:!0,className:h.title},"Cluster")),v.a.createElement(C.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start",style:{marginBottom:20}},v.a.createElement(C.a,{item:!0,xs:12,md:3,lg:2,container:!0},v.a.createElement(D.a,{variant:"h6"},"No. of Clusters :")),v.a.createElement(C.a,{container:!0,xs:12,md:8,alignItems:"flex-start"},v.a.createElement(I.a,{variant:"contained",disableFocusRipple:!0,disableElevation:!0,type:"submit",onClick:()=>{c(!0);const e=JSON.stringify({BybID:m,NumberOfCluster:0});Object(y.u)({clusterData:e,enqueueSnackbar:u,setSubmitting:c,bybId:m,setCluster:E})},style:{marginTop:6,maxWidth:180}},r?v.a.createElement(x.a,{style:{height:"20px",width:"20px",color:"#fff"}}):"Create Clusters"))),v.a.createElement(C.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start",style:{marginBottom:20}},v.a.createElement(C.a,{item:!0,xs:12,md:3,lg:3,container:!0,alignItems:"center"},v.a.createElement(D.a,{variant:"h6"},"Total Deliveries :")),v.a.createElement(C.a,{container:!0,xs:12,md:8,alignItems:"center"},v.a.createElement(D.a,{variant:"h4",component:"h5"},t))))}var N=a(193);const P=Object(o.a)(e=>({root:{width:"100%",padding:e.spacing(3)},paper:{width:"100%",marginBottom:e.spacing(2),paddingTop:20},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},avatar:{color:"#ffffff",backgroundColor:r.a[700]}}));t.default=v.a.memo((function(e){const t=P(),a=v.a.useState("asc"),l=Object(n.a)(a,2),r=l[0],o=l[1],O=v.a.useState("clusterTime"),j=Object(n.a)(O,2),C=j[0],x=j[1],D=v.a.useState(0),I=Object(n.a)(D,2),k=I[0],A=I[1],B=v.a.useState(""),T=Object(n.a)(B,2),W=(T[0],T[1],Object(i.b)().enqueueSnackbar,Object(f.useState)(!1)),M=Object(n.a)(W,2),R=M[0],q=M[1],F=v.a.useState(10),L=Object(n.a)(F,2),_=L[0],z=L[1],K=v.a.useState(!1),H=Object(n.a)(K,2),J=(H[0],H[1],v.a.useState([])),U=Object(n.a)(J,2),G=U[0],Q=U[1],V=Object(p.c)(e=>e.bybId);Object(f.useEffect)(()=>(Object(y.p)({bybId:V,setClusters:Q,setLoading:q}),()=>{}),[V]);const Z=_-Math.min(_,G.length-k*_);return v.a.createElement(v.a.Fragment,null,v.a.createElement(c.a,null,v.a.createElement("title",null,"Agents"),v.a.createElement("meta",{name:"description",content:"List of Agents Delivering your deliveries"})),R?v.a.createElement(N.a,null):v.a.createElement("div",{className:t.root},v.a.createElement(s.a,{className:t.paper},v.a.createElement(w,{totaldeliveries:(()=>{let e=0;for(let n=0;n<G.length;n++){var t,a;console.log(null===(t=G[n])||void 0===t?void 0:t.totalDeliveries,e,"====---===---===---=="),e+=null===(a=G[n])||void 0===a?void 0:a.totalDeliveries}return e})(),setClusters:Q}),v.a.createElement(b.a,null,v.a.createElement(d.a,{className:t.table,"aria-labelledby":"Agents","aria-label":"Agent Data"},v.a.createElement(S,{classes:t,order:r,orderBy:C,onRequestSort:(e,t)=>{o(C===t&&"asc"===r?"desc":"asc"),x(t)},rowCount:G.length,headCells:[{id:"Agent_Name",numeric:!0,disablePadding:!1,label:"Agent Name"},{id:"deliveryAgentID",numeric:!0,disablePadding:!1,label:"Agent ID"},{id:"totalDeliveries",numeric:!1,disablePadding:!1,label:"Deliveries in Cluster"},{id:"clusterDistance",numeric:!1,disablePadding:!1,label:"Cluster Distance"},{id:"clusterTime",numeric:!1,disablePadding:!1,label:"Cluster Time"},{id:"distanceObserved",numeric:!0,disablePadding:!1,label:"Distance Observed"},{id:"averageWeight",numeric:!0,disablePadding:!1,label:"Total Weight"}]}),v.a.createElement(m.a,null,G&&Object(h.e)(G,Object(h.c)(r,C)).slice(k*_,k*_+_).map(e=>v.a.createElement(v.a.Fragment,null,v.a.createElement(h.b,{tabIndex:-1,key:e.name},v.a.createElement(h.a,{align:"center"},e.deliveryAgentName),v.a.createElement(h.a,{align:"center"},e.deliveryAgentID),v.a.createElement(h.a,{align:"center"},e.totalDeliveries),v.a.createElement(h.a,{align:"center"},e.clusterDistance),v.a.createElement(h.a,{align:"center"},e.clusterTime),v.a.createElement(h.a,{align:"center"},(e.distanceObserved/1e3).toFixed(2)," KM"),v.a.createElement(h.a,{align:"center"},e.averageWeight)))),Z>0&&v.a.createElement(E.a,null,v.a.createElement(u.a,{colSpan:6}))))),v.a.createElement(g.a,{rowsPerPageOptions:[5,10,25],component:"div",count:G.length,rowsPerPage:_,page:k,onChangePage:(e,t)=>{A(t)},onChangeRowsPerPage:e=>{z(parseInt(e.target.value,10)),A(0)}}))))}))}}]);
//# sourceMappingURL=views-error.2dbb4a60.chunk.js.map