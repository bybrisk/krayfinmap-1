(this.webpackJsonpbybrisk=this.webpackJsonpbybrisk||[]).push([[2],{293:function(e,t){},436:function(e,t){},437:function(e,t){},439:function(e,t,a){e.exports=a.p+"static/media/excelDemo.39241ad5.png"},510:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),l=a(240),i=a(4),o=a(162),c=a(0),s=a.n(c),d=a(477),m=a(131),u=a(499),p=a(57),g=a.n(p),b=a(167),f=a(51),h=a(192),y=a.n(h),E=a(129),x=a(128),v=a(491),C=a(492),k=a(487),w=a(490),j=a(508),O=a(488),S=a(53),P=a(166),N=a(180),L=a(245),F=a(485),I=a(438),A=a.n(I),D=a(22),R=(a(88),a(168)),W=a(291),T=a.n(W);const U=Object(x.a)(e=>({root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1),padding:"0 30px",display:"flex",justifyContent:"space-between",alignItems:"center",[e.breakpoints.down("xs")]:{justifyContent:"center",flexDirection:"column",alignItems:"flex-start"}},reactbutton:{display:"flex",alignItems:"center",justifyContent:"center"},root1:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1),padding:"0 30px"},btn:{maxWidth:220,width:"100%",backgroundColor:e.palette.secondary.main,border:"none",outline:"none",height:49,borderRadius:49,color:"#fff",textTransform:"uppercase",fontWeight:"600",margin:"10px 0",cursor:"pointer",transition:"0.5s","&:hover":{backgroundColor:e.palette.secondary.light},[e.breakpoints.down("sm")]:{maxWidth:180,height:42}},title:{flex:"1 1 100%"}}));var B=e=>{const t=e.rows,a=U(),n=s.a.useState(!1),r=Object(o.a)(n,2);r[0],r[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(F.a,{className:a.root},s.a.createElement(m.a,{variant:"h5"},"Failed Deliveries"),s.a.createElement(R.a,{width:"140px",padding:".5rem",style:{},className:a.reactbutton,onClick:()=>{const e={Sheets:{data:T.a.utils.json_to_sheet(t)},SheetNames:["data"]},a=T.a.write(e,{bookType:"xlsx",type:"array"}),n=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),r=document.createElement("a");console.log(n),r.href=URL.createObjectURL(n),r.download="FailedDeliveries.xlsx",document.body.appendChild(r),r.click(),console.log(r)}},s.a.createElement(A.a,{style:{fontSize:"25px",marginTop:"4px"}}))))};const M=Object(x.a)(e=>({root:{width:"100%",padding:e.spacing(3)},paper:{width:"100%",marginBottom:e.spacing(2),paddingTop:20},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},avatar:{color:"#ffffff",backgroundColor:y.a[700]}}));function q(e){const t=e.rows,a=M(),n=s.a.useState("asc"),r=Object(o.a)(n,2),l=r[0],i=r[1],d=s.a.useState("AgentID"),m=Object(o.a)(d,2),u=m[0],p=m[1],g=s.a.useState(0),b=Object(o.a)(g,2),f=b[0],h=b[1],y=s.a.useState(10),x=Object(o.a)(y,2),F=x[0],I=x[1],A=Object(c.useRef)(null),D=F-Math.min(F,t.length-f*F);return s.a.createElement(s.a.Fragment,null,s.a.createElement(P.a,null,s.a.createElement("title",null,"Failed Deliveries"),s.a.createElement("meta",{name:"description",content:"List of Deliveries failed while uploading "})),s.a.createElement(c.Suspense,{fallback:s.a.createElement(S.a,null)},s.a.createElement("div",{className:a.root},s.a.createElement(E.a,{className:a.paper},s.a.createElement(B,{rows:t}),s.a.createElement(w.a,null,s.a.createElement(v.a,{className:a.table,"aria-labelledby":"Agents","aria-label":"Agent Data"},s.a.createElement(L.a,{classes:a,order:l,orderBy:u,onRequestSort:(e,t)=>{i(u===t&&"asc"===l?"desc":"asc"),p(t)},rowCount:t.length,headCells:[{id:"CustomerName",numeric:!1,disablePadding:!1,label:"Name"},{id:"Locality",numeric:!1,disablePadding:!1,label:"Locality"},{id:"Landmark",numeric:!1,disablePadding:!1,label:"Landmark"},{id:"City",numeric:!1,disablePadding:!1,label:"City"},{id:"Pin",numeric:!1,disablePadding:!1,label:"Pin"},{id:"phone",numeric:!0,disablePadding:!1,label:"Mobile"},{id:"itemWeight",numeric:!0,disablePadding:!1,label:"Item Weight"},{id:"Amount",numeric:!0,disablePadding:!1,label:"Payment"}]}),s.a.createElement(C.a,null,t&&(null===t||void 0===t?void 0:t.map(e=>s.a.createElement(s.a.Fragment,null,s.a.createElement(N.b,{tabIndex:-1,key:e["Customer Name"],ref:A,style:{cursor:"pointer"}},s.a.createElement(N.a,{align:"center"},e["Customer Name"]),s.a.createElement(N.a,{align:"center"},e.Locality),s.a.createElement(N.a,{align:"center"},e.Landmark),s.a.createElement(N.a,{align:"center"},e.City),s.a.createElement(N.a,{align:"center"},e.Pincode),s.a.createElement(N.a,{align:"center"},e.Phone),s.a.createElement(N.a,{align:"center"},e["Item Weight"]),s.a.createElement(N.a,{align:"center"},e.Amount||"Paid"))))),D>0&&s.a.createElement(O.a,null,s.a.createElement(k.a,{colSpan:6}))))),s.a.createElement(j.a,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:F,page:f,onChangePage:(e,t)=>{h(t)},onChangeRowsPerPage:e=>{I(parseInt(e.target.value,10)),h(0)}})))))}var G=a(50),J=a(439),_=a.n(J);a(188);g.a.create({baseURL:"https://bybriskbackend.herokuapp.com",withCredentials:!0,credentials:"include"});function z(e){return s.a.createElement(u.a,{position:"relative",display:"inline-flex"},s.a.createElement(d.a,Object.assign({variant:"determinate"},e)),s.a.createElement(u.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},s.a.createElement(m.a,{variant:"caption",component:"div",style:{color:"#ffffff"}},"".concat(Math.round(e.value),"%"))))}t.default=e=>{const t=s.a.useState(0),a=Object(o.a)(t,2),n=a[0],d=a[1],m=(Object(f.b)().enqueueSnackbar,Object(c.useState)(!1)),u=Object(o.a)(m,2),p=u[0],h=u[1];const y=Object(D.c)(e=>e.bybId),E=Object(c.useState)([]),x=Object(o.a)(E,2),v=x[0],C=x[1],k=Object(c.useState)(!1),w=Object(o.a)(k,2),j=w[0],O=w[1],S=g.a.CancelToken.source(),P=Object(c.useState)([]),N=Object(o.a)(P,2),L=N[0],F=N[1],I=function(){var t=Object(i.a)(r.a.mark((function t(a){var i,o,c,s,m;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(function(e,t,n){if("GEOCODING FAILED"===e.value.data.message){const e=v;e.push(a[t]),C(e)}}),i=a.map((e,t)=>{const a=JSON.stringify({CustomerAddress:e.Locality+", "+e.Landmark+", "+e.City,itemWeight:e["Item Weight"],phone:e.Phone.toString(),CustomerName:e["Customer Name"],paymentStatus:!e.Amount,amount:e.Amount||0,note:e.Note.toString(),BybID:y});return Object(G.b)({article:a,failedDeliveries:v})}),o=0,c=Object(l.a)(i),t.prev=4,c.s();case 6:if((s=c.n()).done){t.next=12;break}return m=s.value,t.next=10,m.then(e=>{if(d(100*(o+=1)/i.length),"GEOCODING FAILED"===e.data.message){const e=v;e.push(a[n]),C(e),console.log(v,"-nikhiltale")}}).catch(e=>{});case 10:t.next=6;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),c.e(t.t0);case 17:return t.prev=17,c.f(),t.finish(17);case 20:0!==v.length?O(!0):e.closeModal();case 21:case"end":return t.stop()}}),t,null,[[4,14,17,20]])})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=Object(i.a)(r.a.mark((function t(a){var n,l,i,o,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],console.log(a,"entered into apirequestwithout latitude"),a.map((e,t)=>{const a=JSON.stringify({CustomerAddress:e.Locality+", "+e.Landmark+", "+e.City,itemWeight:e["Item Weight"],phone:e.Phone.toString(),latitude:e.Latitude,longitude:e.Longitude,CustomerName:e["Customer Name"],paymentStatus:!e.Amount,amount:e.Amount||0,note:e.Note.toString(),BybID:y});Object(G.c)({article:a,source:S,responseArray:n})}),l=0,i=0,o=n;case 5:if(!(i<o.length)){t.next=14;break}return c=o[i],d(100*(l+=1)/n.length),t.next=11,c.then(e=>{}).catch(e=>{});case 11:i++,t.next=5;break;case 14:e.closeModal(),g.a.isCancel()&&h(!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return console.log(v,"from global "),s.a.createElement(s.a.Fragment,null,j?s.a.createElement(s.a.Fragment,null,s.a.createElement(q,{rows:v})):s.a.createElement(b.d,{className:"wrapper",style:{padding:"30px 30px",justifyContent:"flex-start"}},s.a.createElement("img",{src:_.a,style:{width:"50%"},alt:"excel file demo"}),s.a.createElement("div",null,s.a.createElement("input",{type:"file",onChange:e=>{(e=>{h(!0);const t=new Promise((t,a)=>{const n=new FileReader;n.readAsArrayBuffer(e),n.onload=e=>{const a=e.target.result,n=T.a.read(a,{type:"buffer"}),r=n.SheetNames[0],l=n.Sheets[r],i=T.a.utils.sheet_to_json(l);t(i)},n.onerror=e=>{a(e)}});F(L),t.then(e=>{e[0].Latitude?A(e):I(e)})})(e.target.files[0])},id:"excelUpload",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",style:{display:"none"}}),s.a.createElement("label",{htmlFor:"excelUpload"},s.a.createElement("div",{style:{background:"#FF6F1F",borderRadius:"10rem",border:"10px",color:"#ffffff",margin:"0",padding:"1rem",width:"300px",height:"3.5rem",textAlign:"center",cursor:"pointer"}},p?s.a.createElement(z,{value:n}):"Upload Excel File")),s.a.createElement("div",{style:{marginTop:50},onClick:()=>S.cancel("axios request cancelled")},"Cancel"))))}}}]);
//# sourceMappingURL=Add - Multiple.f40cd430.chunk.js.map