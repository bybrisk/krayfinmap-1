(this.webpackJsonpbybrisk=this.webpackJsonpbybrisk||[]).push([[10],{485:function(e,t,a){"use strict";a.r(t);var n=a(155),l=a(0),r=a.n(l),i=a(433),c=a(468),s=a(421),o=a.n(s),d=a(422),u=a.n(d),m=a(457),b=a(458),g=a(459),f=a(460),E=a(122),p=a(193),v=a(507),y=a(465),h=a(496),O=a(123),j=a(23),C=a(49),S=a(50),k=a(73),x=a.n(k),D=a(74),I=a(159),w=a(41);const N=r.a.lazy(()=>a.e(3).then(a.bind(null,239))),P=Object(E.a)(e=>({listItem:{paddingTop:0,paddingBottom:0},avatar:{height:20,width:20,borderRadius:"50%"},iconContainer:{minWidth:30},cardContainer:{position:"absolute",top:150,right:45,maxWidth:200,maxHeight:200,zIndex:60,overflow:"scroll",background:"#fff",textAlign:"left",borderRadius:10,transition:"all 0.4s",boxShadow:"0px 0px 120px -25px rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"flex-start",justifyContent:"center",minWidth:100}})),A=({color:e})=>r.a.createElement("div",null,r.a.createElement(o.a,{style:{color:e,height:20,width:20}})),B=({onClick:e})=>r.a.createElement("div",null,r.a.createElement(u.a,{onClick:e,style:{color:"darkgoldenrod",height:20,width:20}}));new x.a({publishKey:"pub-c-b62c8c92-592d-4472-bee9-03e3ccf8645b",subscribeKey:"sub-c-ad9893f0-6907-11eb-b914-eedc703588a5"});t.default=()=>{var e;const t=Object(S.b)().enqueueSnackbar,a=r.a.useState(!1),s=Object(n.a)(a,2),o=s[0],d=s[1],u=P(),E=Object(l.useState)(null),k=Object(n.a)(E,2),x=k[0],T=k[1],W=Object(l.useState)(!1),M=Object(n.a)(W,2),R=M[0],q=M[1],F=Object(l.useState)(null),z=Object(n.a)(F,2),L=z[0],_=z[1],K=Object(l.useState)(["6038bd0fc35e3b8e8bd9f81a"]),H=Object(n.a)(K,1)[0],J=Object(D.b)(),U=Object(l.useState)({lat:23.202357,lng:77.414254}),G=Object(n.a)(U,2),Q=G[0],V=(G[1],Object(j.c)(e=>e.bybId)),Z=Object(l.useState)(11),X=Object(n.a)(Z,2),Y=X[0],$=X[1],ee=r.a.useState(""),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],le=e=>{const t=e.message;console.log(t)},re=()=>{d(!1)};return Object(l.useEffect)(()=>(q(!0),Object(C.m)({bybId:V,setClusters:T,enqueueSnackbar:t,setLoading:q,setDelivery:_}),()=>{}),[V]),console.log(L),Object(l.useEffect)(()=>{J.addListener({message:le}),J.subscribe({channels:H})},[J,H]),r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,null,r.a.createElement("title",null,"Cluster Summary"),r.a.createElement("meta",{name:"description",content:"Visual Representation of Deliveries of your account Made Simple"})),R?r.a.createElement(p.a,null):r.a.createElement("div",{style:{height:"90vh",width:"100%"}},r.a.createElement("div",{className:u.cardContainer,id:"bright"},R?r.a.createElement(c.a,{style:{height:"30px",width:"30px",color:"#4caf50"}}):r.a.createElement(m.a,{"aria-label":"Cluster display"},0===(null===x||void 0===x?void 0:x.length)&&r.a.createElement(b.a,{className:u.listItem,style:{marginTop:23,color:"#057g78"}},"No Clusters Present"),null===x||void 0===x?void 0:x.map((e,t)=>(console.log(e),r.a.createElement(b.a,{button:!0,key:e[0].deliveryAgentName,component:w.b,to:{pathname:"/dashboard/clusterDeliveries",state:{clusterID:e[0].clusterid}},className:u.listItem},r.a.createElement(g.a,{className:u.iconContainer},r.a.createElement(O.a,{className:u.avatar,style:{background:e[0].color},variant:"elevation"})),r.a.createElement(f.a,{primary:e[0].deliveryAgentName})))))),r.a.createElement(i.a,{bootstrapURLKeys:{key:"AIzaSyDSl1BOkFlpEiOs3PIavj24cMDo0tDBOIQ"},defaultCenter:Q,defaultZoom:Y,yesIWantToUseGoogleMapApiInternals:!0,onChange:({zoom:e,bounds:t})=>{$(e)}},null===x||void 0===x?void 0:x.map(e=>e.map(e=>r.a.createElement(A,{lat:e.geometry.latitude,lng:e.geometry.longitude,color:e.color,text:"My Marker"}))),null===x&&(null===L||void 0===L||null===(e=L.filter(e=>"Pending"===e._source.deliveryStatus))||void 0===e?void 0:e.map(e=>r.a.createElement(B,{lat:e._source.latitude,lng:e._source.longitude,onClick:()=>{return t=e._id,ne(t),void d(!0);var t},color:"darkgoldenrod",text:"My Marker"}))))),r.a.createElement(h.a,{open:o,onClose:re,"aria-labelledby":"Deliveries","aria-describedby":"Deliveries",closeAfterTransition:!0,BackdropComponent:v.a,BackdropProps:{timeout:400},style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",background:"#ffffff"}},r.a.createElement(y.a,{in:o,timeout:250},r.a.createElement("section",{style:{background:"#ffffff",width:"100%",height:"100%"}},r.a.createElement("div",{style:{fontSize:40,textAlign:"right",padding:"0 30px",margin:0}},"    ",r.a.createElement("span",{style:{cursor:"pointer"},onClick:re},"x")),r.a.createElement(N,{id:ae,handleClose:re})))))}},486:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(155),l=a(279),r=a(0),i=a.n(r),c=a(5),s=a(52),o=a(159),d=a(49),u=a(238),m=a.n(u);const b=e=>{const t=e.array,a=e.filter;return t.filter(e=>e._source.deliveryStatus===a).length};function g(e){console.log(e.location,e.location.state,"--------------------------------");const t=Object(c.g)(),a=null!==e.location.state&&e.location.state.clusterID;console.log(a),Object(r.useEffect)(()=>{Object(d.l)({clusterID:a,setDelivery:E})},[a]);const u=i.a.useState([]),g=Object(n.a)(u,2),f=g[0],E=g[1];b({array:f,filter:"confirmed"}),b({array:f,filter:"cancelled"}),b({array:f,filter:"pending"}),b({array:f,filter:"transit"});return console.log(f),i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,null,i.a.createElement("title",null,"Deliveries"),i.a.createElement("meta",{name:"description",content:"List of Deliveries of your account"})),i.a.createElement(r.Suspense,{fallback:i.a.createElement(s.a,null)},i.a.createElement(m.a,{onClick:()=>t.goBack()}),i.a.createElement(l.a,{rows:f,setDelivery:E})))}},500:function(e,t,a){"use strict";a.r(t);var n=a(155),l=a(185),r=a.n(l),i=a(159),c=a(50),s=a(123),o=a(122),d=a(482),u=a(483),m=a(478),b=a(481),g=a(499),f=a(479),E=a(0),p=a.n(E),v=a(23),y=a(49),h=a(173),O=a(480),j=a(508);var C=function(e){const t=e.classes,a=e.order,n=e.orderBy,l=e.onRequestSort,r=e.headCells;return p.a.createElement(O.a,null,p.a.createElement(f.a,null,r.map(e=>{return p.a.createElement(h.a,{key:e.id,align:"center",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},p.a.createElement(j.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(r=e.id,e=>{l(e,r)})},e.label,n===e.id?p.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var r})))},S=a(472),k=a(468),x=a(125),D=a(161);const I=Object(o.a)(e=>({title:{fontWeight:550,fontSize:"2rem"},toolbarContainer:{padding:e.spacing(3,1)}}));function w(e){console.log(e);e.setClusters;const t=e.totaldeliveries,a=Object(E.useState)(!1),l=Object(n.a)(a,2),r=l[0],i=l[1],s=p.a.useState([]),o=Object(n.a)(s,2),d=(o[0],o[1]),u=Object(v.c)(e=>e.bybId),m=Object(c.b)().enqueueSnackbar;Object(E.useEffect)(()=>(Object(y.k)({bybId:u,setAgents:d}),()=>{}),[u]);const b=Object(E.useState)(null),g=Object(n.a)(b,2),f=(g[0],g[1]),h=I();return p.a.createElement(S.a,{container:!0,justify:"center",direction:"column",alignItems:"center",className:h.toolbarContainer},p.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start"},p.a.createElement(x.a,{variant:"h5",component:"h6",gutterBottom:!0,className:h.title},"Cluster")),p.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start",style:{marginBottom:20}},p.a.createElement(S.a,{container:!0,xs:12,alignItems:"flex-start"},p.a.createElement(D.a,{variant:"contained",disableFocusRipple:!0,disableElevation:!0,type:"submit",onClick:()=>{i(!0);const e=JSON.stringify({BybID:u,NumberOfCluster:0});Object(y.v)({clusterData:e,enqueueSnackbar:m,setSubmitting:i,bybId:u,setCluster:f})},style:{marginTop:6,maxWidth:180}},r?p.a.createElement(k.a,{style:{height:"20px",width:"20px",color:"#fff"}}):"Create Clusters"))),p.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start",style:{marginBottom:20}},p.a.createElement(S.a,{item:!0,xs:12,md:3,lg:3,container:!0,alignItems:"center"},p.a.createElement(x.a,{variant:"h6"},"Total Deliveries :")),p.a.createElement(S.a,{container:!0,xs:12,md:8,alignItems:"center"},p.a.createElement(x.a,{variant:"h4",component:"h5"},t))))}var N=a(193);const P=Object(o.a)(e=>({root:{width:"100%",padding:e.spacing(3)},paper:{width:"100%",marginBottom:e.spacing(2),paddingTop:20},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},avatar:{color:"#ffffff",backgroundColor:r.a[700]}}));t.default=p.a.memo((function(e){const t=P(),a=p.a.useState("asc"),l=Object(n.a)(a,2),r=l[0],o=l[1],O=p.a.useState("clusterTime"),j=Object(n.a)(O,2),S=j[0],k=j[1],x=p.a.useState(0),D=Object(n.a)(x,2),I=D[0],A=D[1],B=p.a.useState(""),T=Object(n.a)(B,2),W=(T[0],T[1],Object(c.b)().enqueueSnackbar,Object(E.useState)(!1)),M=Object(n.a)(W,2),R=M[0],q=M[1],F=p.a.useState(10),z=Object(n.a)(F,2),L=z[0],_=z[1],K=p.a.useState(!1),H=Object(n.a)(K,2),J=(H[0],H[1],p.a.useState([])),U=Object(n.a)(J,2),G=U[0],Q=U[1],V=Object(v.c)(e=>e.bybId);Object(E.useEffect)(()=>(Object(y.p)({bybId:V,setClusters:Q,setLoading:q}),()=>{}),[V]);const Z=L-Math.min(L,G.length-I*L);return p.a.createElement(p.a.Fragment,null,p.a.createElement(i.a,null,p.a.createElement("title",null,"Agents"),p.a.createElement("meta",{name:"description",content:"List of Agents Delivering your deliveries"})),R?p.a.createElement(N.a,null):p.a.createElement("div",{className:t.root},p.a.createElement(s.a,{className:t.paper},p.a.createElement(w,{totaldeliveries:(()=>{let e=0;for(let n=0;n<G.length;n++){var t,a;console.log(null===(t=G[n])||void 0===t?void 0:t.totalDeliveries,e,"====---===---===---=="),e+=null===(a=G[n])||void 0===a?void 0:a.totalDeliveries}return e})(),setClusters:Q}),p.a.createElement(b.a,null,p.a.createElement(d.a,{className:t.table,"aria-labelledby":"Agents","aria-label":"Agent Data"},p.a.createElement(C,{classes:t,order:r,orderBy:S,onRequestSort:(e,t)=>{o(S===t&&"asc"===r?"desc":"asc"),k(t)},rowCount:G.length,headCells:[{id:"Agent_Name",numeric:!0,disablePadding:!1,label:"Agent Name"},{id:"deliveryAgentID",numeric:!0,disablePadding:!1,label:"Agent ID"},{id:"totalDeliveries",numeric:!1,disablePadding:!1,label:"Deliveries in Cluster"},{id:"clusterDistance",numeric:!1,disablePadding:!1,label:"Cluster Distance"},{id:"clusterTime",numeric:!1,disablePadding:!1,label:"Cluster Time"},{id:"distanceObserved",numeric:!0,disablePadding:!1,label:"Distance Observed"},{id:"averageWeight",numeric:!0,disablePadding:!1,label:"Total Weight"}]}),p.a.createElement(u.a,null,G&&Object(h.e)(G,Object(h.c)(r,S)).slice(I*L,I*L+L).map(e=>p.a.createElement(p.a.Fragment,null,p.a.createElement(h.b,{tabIndex:-1,key:e.name},p.a.createElement(h.a,{align:"center"},e.deliveryAgentName),p.a.createElement(h.a,{align:"center"},e.deliveryAgentID),p.a.createElement(h.a,{align:"center"},e.totalDeliveries),p.a.createElement(h.a,{align:"center"},e.clusterDistance),p.a.createElement(h.a,{align:"center"},e.clusterTime),p.a.createElement(h.a,{align:"center"},(e.distanceObserved/1e3).toFixed(2)," KM"),p.a.createElement(h.a,{align:"center"},e.averageWeight)))),Z>0&&p.a.createElement(f.a,null,p.a.createElement(m.a,{colSpan:6}))))),p.a.createElement(g.a,{rowsPerPageOptions:[5,10,25],component:"div",count:G.length,rowsPerPage:L,page:I,onChangePage:(e,t)=>{A(t)},onChangeRowsPerPage:e=>{_(parseInt(e.target.value,10)),A(0)}}))))}))}}]);
//# sourceMappingURL=views-error.98c533e0.chunk.js.map