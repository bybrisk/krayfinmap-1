(this.webpackJsonpbybrisk=this.webpackJsonpbybrisk||[]).push([[10],{487:function(e,t,a){"use strict";a.r(t);var n=a(155),l=a(0),r=a.n(l),i=a(435),c=a(470),s=a(422),o=a.n(s),d=a(423),u=a.n(d),m=a(424),b=a.n(m),g=a(459),f=a(460),p=a(461),E=a(462),v=a(122),y=a(193),h=a(509),O=a(467),j=a(498),C=a(123),S=a(23),k=a(49),x=a(50),D=a(73),I=a.n(D),w=a(74),N=a(159),P=a(41);const A=r.a.lazy(()=>a.e(3).then(a.bind(null,240))),B=Object(v.a)(e=>({listItem:{paddingTop:0,paddingBottom:0},avatar:{height:20,width:20,borderRadius:"50%"},iconContainer:{minWidth:30},cardContainer:{position:"absolute",top:150,right:45,maxWidth:200,maxHeight:200,zIndex:60,overflow:"scroll",background:"#fff",textAlign:"left",borderRadius:10,transition:"all 0.4s",boxShadow:"0px 0px 120px -25px rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"flex-start",justifyContent:"center",minWidth:100}})),M=({color:e})=>r.a.createElement("div",null,r.a.createElement(o.a,{style:{color:e,height:20,width:20}})),T=({onClick:e})=>r.a.createElement("div",null,r.a.createElement(u.a,{onClick:e,style:{color:"darkgoldenrod",height:20,width:20}})),W=()=>r.a.createElement("div",null,r.a.createElement(b.a,{style:{color:"blue",height:20,width:20}}));new I.a({publishKey:"pub-c-b62c8c92-592d-4472-bee9-03e3ccf8645b",subscribeKey:"sub-c-ad9893f0-6907-11eb-b914-eedc703588a5"});t.default=r.a.memo(()=>{var e;const t=Object(x.b)().enqueueSnackbar,a=r.a.useState(!1),s=Object(n.a)(a,2),o=s[0],d=s[1],u=B(),m=Object(l.useState)(null),b=Object(n.a)(m,2),v=b[0],D=b[1],I=Object(l.useState)(!1),L=Object(n.a)(I,2),R=L[0],q=L[1],F=Object(l.useState)(null),z=Object(n.a)(F,2),_=z[0],K=z[1],H=Object(l.useState)(new Map),J=Object(n.a)(H,2),U=J[0],G=J[1],Q=Object(l.useState)(["6038bd0fc35e3b8e8bd9f81a"]),V=Object(n.a)(Q,1)[0],Z=Object(w.b)(),X=Object(l.useState)({lat:23.202357,lng:77.414254}),Y=Object(n.a)(X,2),$=Y[0],ee=(Y[1],Object(S.c)(e=>e.bybId)),te=Object(l.useState)(11),ae=Object(n.a)(te,2),ne=ae[0],le=ae[1],re=r.a.useState(""),ie=Object(n.a)(re,2),ce=ie[0],se=ie[1],oe=()=>{d(!1)};Object(l.useEffect)(()=>(q(!0),Object(k.m)({bybId:ee,setClusters:D,enqueueSnackbar:t,setLoading:q,setDelivery:K}),()=>{}),[ee]);return Object(l.useEffect)(()=>{Z.addListener({status:function(e){},message:function({channel:e,message:t,publisher:a}){t&&(e=>{G(new Map(U.set(e.agent,e)))})(t)},presence:function(e){}}),Z.subscribe({channels:["6038bd0fc35e3b8e8bd9f81a"]})},[Z,V]),r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,null,r.a.createElement("title",null,"Cluster Summary"),r.a.createElement("meta",{name:"description",content:"Visual Representation of Deliveries of your account Made Simple"})),R?r.a.createElement(y.a,null):r.a.createElement("div",{style:{height:"90vh",width:"100%"}},r.a.createElement("div",{className:u.cardContainer,id:"bright"},R?r.a.createElement(c.a,{style:{height:"30px",width:"30px",color:"#4caf50"}}):r.a.createElement(g.a,{"aria-label":"Cluster display"},0===(null===v||void 0===v?void 0:v.length)&&r.a.createElement(f.a,{className:u.listItem,style:{marginTop:23,color:"#057g78"}},"No Clusters Present"),null===v||void 0===v?void 0:v.map((e,t)=>r.a.createElement(f.a,{button:!0,key:e[0].deliveryAgentName,component:P.b,to:{pathname:"/dashboard/clusterDeliveries",state:{clusterID:e[0].clusterid}},className:u.listItem},r.a.createElement(p.a,{className:u.iconContainer},r.a.createElement(C.a,{className:u.avatar,style:{background:e[0].color},variant:"elevation"})),r.a.createElement(E.a,{primary:e[0].deliveryAgentName}))))),r.a.createElement(i.a,{bootstrapURLKeys:{key:"AIzaSyDSl1BOkFlpEiOs3PIavj24cMDo0tDBOIQ"},defaultCenter:$,defaultZoom:ne,yesIWantToUseGoogleMapApiInternals:!0,onChange:({zoom:e,bounds:t})=>{le(e)}},null===v||void 0===v?void 0:v.map(e=>e.map(e=>r.a.createElement(M,{lat:e.geometry.latitude,lng:e.geometry.longitude,color:e.color,text:"My Marker"}))),null===v&&(null===_||void 0===_||null===(e=_.filter(e=>"Pending"===e._source.deliveryStatus))||void 0===e?void 0:e.map(e=>r.a.createElement(T,{lat:e._source.latitude,lng:e._source.longitude,onClick:()=>{return t=e._id,se(t),void d(!0);var t},color:"darkgoldenrod",text:"My Marker"}))),[...U.values()].map(e=>r.a.createElement(W,{lat:e.Lat,lng:e.Log,color:"#000",text:"My Marker"})))),r.a.createElement(j.a,{open:o,onClose:oe,"aria-labelledby":"Deliveries","aria-describedby":"Deliveries",closeAfterTransition:!0,BackdropComponent:h.a,BackdropProps:{timeout:400},style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",background:"#ffffff"}},r.a.createElement(O.a,{in:o,timeout:250},r.a.createElement("section",{style:{background:"#ffffff",width:"100%",height:"100%"}},r.a.createElement("div",{style:{fontSize:40,textAlign:"right",padding:"0 30px",margin:0}},"    ",r.a.createElement("span",{style:{cursor:"pointer"},onClick:oe},"x")),r.a.createElement(A,{id:ce,handleClose:oe})))))})},488:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(155),l=a(280),r=a(0),i=a.n(r),c=a(5),s=a(52),o=a(159),d=a(49),u=a(239),m=a.n(u);const b=e=>{const t=e.array,a=e.filter;return t.filter(e=>e._source.deliveryStatus===a).length};function g(e){console.log(e.location,e.location.state,"--------------------------------");const t=Object(c.g)(),a=null!==e.location.state&&e.location.state.clusterID;console.log(a),Object(r.useEffect)(()=>{Object(d.l)({clusterID:a,setDelivery:p})},[a]);const u=i.a.useState([]),g=Object(n.a)(u,2),f=g[0],p=g[1];b({array:f,filter:"confirmed"}),b({array:f,filter:"cancelled"}),b({array:f,filter:"pending"}),b({array:f,filter:"transit"});return console.log(f),i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,null,i.a.createElement("title",null,"Deliveries"),i.a.createElement("meta",{name:"description",content:"List of Deliveries of your account"})),i.a.createElement(r.Suspense,{fallback:i.a.createElement(s.a,null)},i.a.createElement(m.a,{onClick:()=>t.goBack()}),i.a.createElement(l.a,{rows:f,setDelivery:p})))}},502:function(e,t,a){"use strict";a.r(t);var n=a(155),l=a(185),r=a.n(l),i=a(159),c=a(50),s=a(123),o=a(122),d=a(484),u=a(485),m=a(480),b=a(483),g=a(501),f=a(481),p=a(0),E=a.n(p),v=a(23),y=a(49),h=a(173),O=a(482),j=a(510);var C=function(e){const t=e.classes,a=e.order,n=e.orderBy,l=e.onRequestSort,r=e.headCells;return E.a.createElement(O.a,null,E.a.createElement(f.a,null,r.map(e=>{return E.a.createElement(h.a,{key:e.id,align:"center",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},E.a.createElement(j.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(r=e.id,e=>{l(e,r)})},e.label,n===e.id?E.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var r})))},S=a(474),k=a(470),x=a(125),D=a(161);const I=Object(o.a)(e=>({title:{fontWeight:550,fontSize:"2rem"},toolbarContainer:{padding:e.spacing(3,1)}}));function w(e){console.log(e);e.setClusters;const t=e.totaldeliveries,a=Object(p.useState)(!1),l=Object(n.a)(a,2),r=l[0],i=l[1],s=E.a.useState([]),o=Object(n.a)(s,2),d=(o[0],o[1]),u=Object(v.c)(e=>e.bybId),m=Object(c.b)().enqueueSnackbar;Object(p.useEffect)(()=>(Object(y.k)({bybId:u,setAgents:d}),()=>{}),[u]);const b=Object(p.useState)(null),g=Object(n.a)(b,2),f=(g[0],g[1]),h=I();return E.a.createElement(S.a,{container:!0,justify:"center",direction:"column",alignItems:"center",className:h.toolbarContainer},E.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start"},E.a.createElement(x.a,{variant:"h5",component:"h6",gutterBottom:!0,className:h.title},"Cluster")),E.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start",style:{marginBottom:20}},E.a.createElement(S.a,{container:!0,xs:12,alignItems:"flex-start"},E.a.createElement(D.a,{variant:"contained",disableFocusRipple:!0,disableElevation:!0,type:"submit",onClick:()=>{i(!0);const e=JSON.stringify({BybID:u,NumberOfCluster:0});Object(y.v)({clusterData:e,enqueueSnackbar:m,setSubmitting:i,bybId:u,setCluster:f})},style:{marginTop:6,maxWidth:180}},r?E.a.createElement(k.a,{style:{height:"20px",width:"20px",color:"#fff"}}):"Create Clusters"))),E.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start",style:{marginBottom:20}},E.a.createElement(S.a,{item:!0,xs:12,md:3,lg:3,container:!0,alignItems:"center"},E.a.createElement(x.a,{variant:"h6"},"Total Deliveries :")),E.a.createElement(S.a,{container:!0,xs:12,md:8,alignItems:"center"},E.a.createElement(x.a,{variant:"h4",component:"h5"},t))))}var N=a(193);const P=Object(o.a)(e=>({root:{width:"100%",padding:e.spacing(3)},paper:{width:"100%",marginBottom:e.spacing(2),paddingTop:20},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},avatar:{color:"#ffffff",backgroundColor:r.a[700]}}));t.default=E.a.memo((function(e){const t=P(),a=E.a.useState("asc"),l=Object(n.a)(a,2),r=l[0],o=l[1],O=E.a.useState("clusterTime"),j=Object(n.a)(O,2),S=j[0],k=j[1],x=E.a.useState(0),D=Object(n.a)(x,2),I=D[0],A=D[1],B=E.a.useState(""),M=Object(n.a)(B,2),T=(M[0],M[1],Object(c.b)().enqueueSnackbar,Object(p.useState)(!1)),W=Object(n.a)(T,2),L=W[0],R=W[1],q=E.a.useState(10),F=Object(n.a)(q,2),z=F[0],_=F[1],K=E.a.useState(!1),H=Object(n.a)(K,2),J=(H[0],H[1],E.a.useState([])),U=Object(n.a)(J,2),G=U[0],Q=U[1],V=Object(v.c)(e=>e.bybId);Object(p.useEffect)(()=>(Object(y.p)({bybId:V,setClusters:Q,setLoading:R}),()=>{}),[V]);const Z=z-Math.min(z,G.length-I*z);return E.a.createElement(E.a.Fragment,null,E.a.createElement(i.a,null,E.a.createElement("title",null,"Agents"),E.a.createElement("meta",{name:"description",content:"List of Agents Delivering your deliveries"})),L?E.a.createElement(N.a,null):E.a.createElement("div",{className:t.root},E.a.createElement(s.a,{className:t.paper},E.a.createElement(w,{totaldeliveries:(()=>{let e=0;for(let n=0;n<G.length;n++){var t,a;console.log(null===(t=G[n])||void 0===t?void 0:t.totalDeliveries,e,"====---===---===---=="),e+=null===(a=G[n])||void 0===a?void 0:a.totalDeliveries}return e})(),setClusters:Q}),E.a.createElement(b.a,null,E.a.createElement(d.a,{className:t.table,"aria-labelledby":"Agents","aria-label":"Agent Data"},E.a.createElement(C,{classes:t,order:r,orderBy:S,onRequestSort:(e,t)=>{o(S===t&&"asc"===r?"desc":"asc"),k(t)},rowCount:G.length,headCells:[{id:"Agent_Name",numeric:!0,disablePadding:!1,label:"Agent Name"},{id:"deliveryAgentID",numeric:!0,disablePadding:!1,label:"Agent ID"},{id:"totalDeliveries",numeric:!1,disablePadding:!1,label:"Deliveries in Cluster"},{id:"clusterDistance",numeric:!1,disablePadding:!1,label:"Cluster Distance"},{id:"clusterTime",numeric:!1,disablePadding:!1,label:"Cluster Time"},{id:"distanceObserved",numeric:!0,disablePadding:!1,label:"Distance Observed"},{id:"averageWeight",numeric:!0,disablePadding:!1,label:"Total Weight"}]}),E.a.createElement(u.a,null,G&&Object(h.e)(G,Object(h.c)(r,S)).slice(I*z,I*z+z).map(e=>E.a.createElement(E.a.Fragment,null,E.a.createElement(h.b,{tabIndex:-1,key:e.name},E.a.createElement(h.a,{align:"center"},e.deliveryAgentName),E.a.createElement(h.a,{align:"center"},e.deliveryAgentID),E.a.createElement(h.a,{align:"center"},e.totalDeliveries),E.a.createElement(h.a,{align:"center"},e.clusterDistance),E.a.createElement(h.a,{align:"center"},e.clusterTime),E.a.createElement(h.a,{align:"center"},(e.distanceObserved/1e3).toFixed(2)," KM"),E.a.createElement(h.a,{align:"center"},e.averageWeight)))),Z>0&&E.a.createElement(f.a,null,E.a.createElement(m.a,{colSpan:6}))))),E.a.createElement(g.a,{rowsPerPageOptions:[5,10,25],component:"div",count:G.length,rowsPerPage:z,page:I,onChangePage:(e,t)=>{A(t)},onChangeRowsPerPage:e=>{_(parseInt(e.target.value,10)),A(0)}}))))}))}}]);
//# sourceMappingURL=views-error.7ba5e19f.chunk.js.map