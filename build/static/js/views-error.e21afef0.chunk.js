(this.webpackJsonpbybrisk=this.webpackJsonpbybrisk||[]).push([[10],{476:function(e,t,a){"use strict";a.r(t);var n=a(151),l=a(0),r=a.n(l),c=a(424),i=a(459),s=a(413),o=a.n(s),m=a(448),d=a(449),u=a(450),b=a(451),g=a(118),E=a(119),f=a(23),p=a(48),h=a(49),y=a(155),v=a(40);const j=Object(g.a)(e=>({listItem:{paddingTop:0,paddingBottom:0},avatar:{height:20,width:20,borderRadius:"50%"},iconContainer:{minWidth:30},cardContainer:{position:"absolute",top:150,right:45,maxWidth:200,maxHeight:200,zIndex:60,overflow:"scroll",background:"#fff",textAlign:"left",borderRadius:10,transition:"all 0.4s",boxShadow:"0px 0px 120px -25px rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",minWidth:100}})),O=({color:e})=>r.a.createElement("div",null,r.a.createElement(o.a,{style:{color:e}}));t.default=()=>{const e=Object(h.b)().enqueueSnackbar,t=j(),a=Object(l.useState)([]),s=Object(n.a)(a,2),o=s[0],g=s[1],C=Object(l.useState)(!1),S=Object(n.a)(C,2),x=S[0],I=S[1],D=Object(l.useState)({lat:23.202357,lng:77.414254}),k=Object(n.a)(D,2),w=k[0],N=(k[1],Object(f.c)(e=>e.bybId)),A=Object(l.useState)(11),P=Object(n.a)(A,2),W=P[0],B=P[1];return Object(l.useEffect)(()=>(I(!0),Object(p.l)({bybId:N,setClusters:g,enqueueSnackbar:e,setLoading:I}),()=>{}),[N]),console.log(o),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement("title",null,"Cluster Summary"),r.a.createElement("meta",{name:"description",content:"Visual Representation of Deliveries of your account Made Simple"})),r.a.createElement("div",{style:{height:"90vh",width:"100%"}},r.a.createElement("div",{className:t.cardContainer,id:"bright"},x?r.a.createElement(i.a,{style:{height:"30px",width:"30px",color:"#4caf50"}}):r.a.createElement(m.a,{"aria-label":"Cluster display"},0===o.length&&r.a.createElement(d.a,{className:t.listItem,style:{marginTop:23,color:"#057g78"}},"No Clusters Present"),o.map((e,a)=>r.a.createElement(d.a,{button:!0,key:e[0].clusterid,component:v.b,to:{pathname:"/dashboard/clusterDeliveries",state:{clusterID:e[0].clusterid}},className:t.listItem},r.a.createElement(u.a,{className:t.iconContainer},r.a.createElement(E.a,{className:t.avatar,style:{background:e[0].color},variant:"circle"})),r.a.createElement(b.a,{primary:"cluser ".concat(a)}))))),r.a.createElement(c.a,{bootstrapURLKeys:{key:"AIzaSyCuMJ3dhADqNoE4tGuWTI3_NlwBihj5BtE"},defaultCenter:w,defaultZoom:W,yesIWantToUseGoogleMapApiInternals:!0,onChange:({zoom:e,bounds:t})=>{B(e)}},o.map(e=>e.map(e=>r.a.createElement(O,{lat:e.geometry.latitude,lng:e.geometry.longitude,color:e.color,text:"My Marker"}))))))}},477:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(151),l=a(271),r=a(0),c=a.n(r),i=a(4),s=a(51),o=a(155),m=a(48),d=a(231),u=a.n(d);const b=e=>{const t=e.array,a=e.filter;return t.filter(e=>e._source.deliveryStatus===a).length};function g(e){console.log(e.location,e.location.state,"--------------------------------");const t=Object(i.g)(),a=null!==e.location.state&&e.location.state.clusterID;console.log(a),Object(r.useEffect)(()=>{Object(m.k)({clusterID:a,setDelivery:f})},[a]);const d=c.a.useState([]),g=Object(n.a)(d,2),E=g[0],f=g[1];b({array:E,filter:"confirmed"}),b({array:E,filter:"cancelled"}),b({array:E,filter:"pending"}),b({array:E,filter:"transit"});return c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,null,c.a.createElement("title",null,"Deliveries"),c.a.createElement("meta",{name:"description",content:"List of Deliveries of your account"})),c.a.createElement(r.Suspense,{fallback:c.a.createElement(s.a,null)},c.a.createElement(u.a,{onClick:()=>t.goBack()}),c.a.createElement(l.a,{rows:E,setDelivery:f})))}},492:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return P}));var n=a(151),l=a(189),r=a.n(l),c=a(155),i=a(49),s=a(119),o=a(118),m=a(473),d=a(474),u=a(469),b=a(472),g=a(491),E=a(470),f=a(0),p=a.n(f),h=a(23),y=a(48),v=a(172),j=a(471),O=a(499);var C=function(e){const t=e.classes,a=e.order,n=e.orderBy,l=e.onRequestSort,r=e.headCells;return p.a.createElement(j.a,null,p.a.createElement(E.a,null,r.map(e=>{return p.a.createElement(v.a,{key:e.id,align:"center",padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a},p.a.createElement(O.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(r=e.id,e=>{l(e,r)})},e.label,n===e.id?p.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var r})))},S=a(463),x=a(459),I=a(121),D=a(452),k=a(157);const w=Object(o.a)(e=>({title:{fontWeight:550,fontSize:"2rem"},toolbarContainer:{padding:e.spacing(3,1)}}));function N(e){console.log(e);const t=e.setClusters,a=e.totaldeliveries,l=Object(f.useState)(!1),r=Object(n.a)(l,2),c=r[0],s=r[1],o=p.a.useState([]),m=Object(n.a)(o,2),d=m[0],u=m[1],b=Object(h.c)(e=>e.bybId),g=Object(i.b)().enqueueSnackbar;Object(f.useEffect)(()=>(Object(y.j)({bybId:b,setAgents:u}),()=>{}),[b]);const E=Object(f.useState)(0),v=Object(n.a)(E,2),j=v[0],O=v[1],C=w();return p.a.createElement(S.a,{container:!0,justify:"center",direction:"column",alignItems:"center",className:C.toolbarContainer},p.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start"},p.a.createElement(I.a,{variant:"h5",component:"h6",gutterBottom:!0,className:C.title},"Cluster")),p.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start",style:{marginBottom:20}},p.a.createElement(S.a,{item:!0,xs:12,md:3,lg:2,container:!0},p.a.createElement(I.a,{variant:"h6"},"No. of Clusters :")),p.a.createElement(S.a,{container:!0,xs:12,md:8,alignItems:"flex-start"},p.a.createElement(D.a,{variant:"outlined",style:{maxWidth:200,marginRight:30},margin:"dense",onChange:e=>O(e.target.value),type:"number",min:0,max:d.length,helperText:"Must be less than no. of Agents Added to your account"}),p.a.createElement(k.a,{variant:"contained",disableFocusRipple:!0,disableElevation:!0,type:"submit",onClick:()=>{if(s(!0),console.log(d,j>d.length,0===j,"---------------"),console.log(j,"-------------------"),j>d.length||0===j)console.log("This cluster cannot be made"),s(!1),O(0);else{const e=JSON.stringify({BybID:b,NumberOfCluster:j});Object(y.t)({clusterData:e,enqueueSnackbar:g,setSubmitting:s,bybId:b,setClusters:t})}O(0)},style:{marginTop:6,maxWidth:180}},c?p.a.createElement(x.a,{style:{height:"20px",width:"20px",color:"#fff"}}):"Create Clusters"))),p.a.createElement(S.a,{item:!0,xs:12,md:10,container:!0,justify:"flex-start",style:{marginBottom:20}},p.a.createElement(S.a,{item:!0,xs:12,md:3,lg:3,container:!0,alignItems:"center"},p.a.createElement(I.a,{variant:"h6"},"Total Deliveries :")),p.a.createElement(S.a,{container:!0,xs:12,md:8,alignItems:"center"},p.a.createElement(I.a,{variant:"h4",component:"h5"},a))))}const A=Object(o.a)(e=>({root:{width:"100%",padding:e.spacing(3)},paper:{width:"100%",marginBottom:e.spacing(2),paddingTop:20},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},avatar:{color:"#ffffff",backgroundColor:r.a[700]}}));function P(e){const t=A(),a=p.a.useState("asc"),l=Object(n.a)(a,2),r=l[0],o=l[1],j=p.a.useState("AgentID"),O=Object(n.a)(j,2),S=O[0],x=O[1],I=p.a.useState(0),D=Object(n.a)(I,2),k=D[0],w=D[1],P=p.a.useState(""),W=Object(n.a)(P,2),B=(W[0],W[1],Object(i.b)().enqueueSnackbar,Object(f.useState)(!1)),T=Object(n.a)(B,2),R=(T[0],T[1],p.a.useState(10)),q=Object(n.a)(R,2),M=q[0],F=q[1],z=p.a.useState(!1),J=Object(n.a)(z,2),L=(J[0],J[1],p.a.useState([])),H=Object(n.a)(L,2),G=H[0],U=H[1],_=Object(h.c)(e=>e.bybId);Object(f.useEffect)(()=>(Object(y.o)({bybId:_,setClusters:U}),()=>{}),[_]);const K=M-Math.min(M,G.length-k*M);return p.a.createElement(p.a.Fragment,null,p.a.createElement(c.a,null,p.a.createElement("title",null,"Agents"),p.a.createElement("meta",{name:"description",content:"List of Agents Delivering your deliveries"})),p.a.createElement("div",{className:t.root},p.a.createElement(s.a,{className:t.paper},p.a.createElement(N,{totaldeliveries:(()=>{let e=0;for(let t=0;t<G.length;t++)console.log(G[t].totalDeliveries,e,"====---===---===---=="),e+=G[t].totalDeliveries;return e})(),setClusters:U}),p.a.createElement(b.a,null,p.a.createElement(m.a,{className:t.table,"aria-labelledby":"Agents","aria-label":"Agent Data"},p.a.createElement(C,{classes:t,order:r,orderBy:S,onRequestSort:(e,t)=>{o(S===t&&"asc"===r?"desc":"asc"),x(t)},rowCount:G.length,headCells:[{id:"clusterid",numeric:!0,disablePadding:!1,label:"Cluster ID"},{id:"deliveryAgentID",numeric:!0,disablePadding:!1,label:"Agent ID"},{id:"totalDeliveries",numeric:!1,disablePadding:!1,label:"Deliveries in Cluster"},{id:"distanceObserved",numeric:!0,disablePadding:!1,label:"Distance Observed"},{id:"averageWeight",numeric:!0,disablePadding:!1,label:"Total Weight"}]}),p.a.createElement(d.a,null,G&&Object(v.e)(G,Object(v.c)(r,S)).slice(k*M,k*M+M).map(e=>p.a.createElement(p.a.Fragment,null,p.a.createElement(v.b,{tabIndex:-1,key:e.name},p.a.createElement(v.a,{align:"center"},e.clusterid),p.a.createElement(v.a,{align:"center"},e.deliveryAgentID),p.a.createElement(v.a,{align:"center"},e.totalDeliveries),p.a.createElement(v.a,{align:"center"},e.distanceObserved),p.a.createElement(v.a,{align:"center"},e.averageWeight)))),K>0&&p.a.createElement(E.a,null,p.a.createElement(u.a,{colSpan:6}))))),p.a.createElement(g.a,{rowsPerPageOptions:[5,10,25],component:"div",count:G.length,rowsPerPage:M,page:k,onChangePage:(e,t)=>{w(t)},onChangeRowsPerPage:e=>{F(parseInt(e.target.value,10)),w(0)}}))))}}}]);
//# sourceMappingURL=views-error.e21afef0.chunk.js.map